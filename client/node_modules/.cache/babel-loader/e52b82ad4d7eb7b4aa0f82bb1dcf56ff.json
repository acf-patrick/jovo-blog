{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import\"./Login.css\";import encrypt from\"../../encrypt\";import{Link}from\"react-router-dom\";import{useState}from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faArrowRightToBracket,faExclamationTriangle}from\"@fortawesome/free-solid-svg-icons\";const Login=()=>{const[errMessage,setErrMessage]=useState(\"\");const onFocus=()=>{setErrMessage(\"\");};const onSubmit=e=>{e.preventDefault();let form=e.currentTarget;let pwd=encrypt(form.password.value);let usr=form.username.value;form.password.value=\"\";const displayError=type=>{let input=document.querySelector(\"[name=\".concat(type,\"]\"));input.style.animation=\"\";setTimeout(()=>{input.style.animation=\"shake 200ms ease 300ms 2\";},0);const message=\"Invalid \".concat(type,\"!\");setErrMessage(message);throw Error(message);};fetch(\"http://localhost:3001/users?username=\".concat(usr)).then(res=>res.json()).then(data=>{if(data.length){if(pwd!==data[0].password)displayError(\"password\");}else displayError(\"username\");}).catch(err=>{console.log(err.message);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",style:{animation:\"appear 700ms ease-out\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"logo\",children:\"Joov Tek\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"username\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"#username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",onFocus:onFocus}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"#password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",onFocus:onFocus}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"})]}),errMessage.length!==0&&/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:\"1rem\",color:\"red\",fontSize:\"1rem\",animation:\"left-to-right 400ms ease-out\"},children:[/*#__PURE__*/_jsx(\"span\",{children:errMessage}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faExclamationTriangle})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Log in\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowRightToBracket})]}),/*#__PURE__*/_jsx(\"p\",{className:\"forgot\",children:/*#__PURE__*/_jsx(Link,{to:\"/password\",children:\"forgot password?\"})})]})]});};export default Login;","map":{"version":3,"sources":["/home/misa/joov-tek/src/components/Login/Login.js"],"names":["encrypt","Link","useState","FontAwesomeIcon","faArrowRightToBracket","faExclamationTriangle","Login","errMessage","setErrMessage","onFocus","onSubmit","e","preventDefault","form","currentTarget","pwd","password","value","usr","username","displayError","type","input","document","querySelector","style","animation","setTimeout","message","Error","fetch","then","res","json","data","length","catch","err","console","log","marginTop","color","fontSize"],"mappings":"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","sourcesContent":["import \"./Login.css\";\nimport encrypt from \"../../encrypt\";\nimport { Link } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRightToBracket, faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Login = () => {\n  const [errMessage, setErrMessage] = useState(\"\");\n\n  const onFocus = () => {\n    setErrMessage(\"\");\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    let form = e.currentTarget;\n    let pwd = encrypt(form.password.value);\n    let usr = form.username.value;\n    form.password.value = \"\";\n\n    const displayError = (type) => {\n      let input = document.querySelector(`[name=${type}]`);\n      input.style.animation = \"\";\n      setTimeout(() => {\n        input.style.animation = \"shake 200ms ease 300ms 2\";\n      }, 0);\n      const message = `Invalid ${type}!`;\n      setErrMessage(message);\n      throw Error(message);\n    };\n\n    fetch(`http://localhost:3001/users?username=${usr}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.length) {\n          if (pwd !== data[0].password) displayError(\"password\");\n        } else displayError(\"username\");\n      })\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  return (\n    <div className=\"login-card\" style={{ animation: \"appear 700ms ease-out\" }}>\n      <h1 className=\"logo\">Joov Tek</h1>\n      <form onSubmit={onSubmit}>\n        <div className=\"username\">\n          <label htmlFor=\"#username\">Username</label>\n          <br />\n          <input \n            type=\"text\" \n            id=\"username\" \n            name=\"username\" \n            onFocus={onFocus} \n          />\n          <div className=\"line\"></div>\n        </div>\n        <div className=\"password\">\n          <label htmlFor=\"#password\">Password</label>\n          <br />\n          <input\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            onFocus={onFocus}\n          />\n          <div className=\"line\"></div>\n        </div>\n        {errMessage.length !== 0 && (\n          <p\n            style={{\n              marginTop: \"1rem\",\n              color: \"red\",\n              fontSize: \"1rem\",\n              animation: \"left-to-right 400ms ease-out\"\n            }}\n          >\n            <span>{errMessage}</span>\n            <FontAwesomeIcon icon={faExclamationTriangle} />\n          </p>\n        )}\n        <button type=\"submit\">\n          <span>Log in</span>\n          <FontAwesomeIcon icon={faArrowRightToBracket}/>\n        </button>\n        <p className=\"forgot\">\n          <Link to=\"/password\">forgot password?</Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}